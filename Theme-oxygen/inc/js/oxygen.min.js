/*! OxyGen oxygen.js
 *  Copyright  (c) 2015-2017 Bjarne Varoystrand - bjarne ○ kokensupport • com
 *  License: GPL
 *  @author Bjarne Varoystrand (@black_skorpio)
 *  @version 1.0.11
 *  @description Internal functions for OxyGen
 *  http://varoystrand.se | http://kokensupport.com
**/
(function(b,a,c,d){b.OxyGen={};OxyGen.init=function(){OxyGen.cacheSelectors();OxyGen.isTouchDevice();if(OxyGen.Body.hasClass(OxyGen.ClassExpanded)&&OxyGen.Body.hasClass(OxyGen.ClassShrink)){OxyGen.Window.scroll(OxyGen.throttle(OxyGen.thinHead,250))}OxyGen.setFooterHeight();OxyGen.loadingMSG();OxyGen.imgProtect();OxyGen.keyMaps();OxyGen.extLinks();OxyGen.disablePW();OxyGen.toggleModal();OxyGen.scrollTo();if(OxyGen.Body.hasClass(OxyGen.ClassEssay)){OxyGen.loadComments()}OxyGen.scrollToTop()};OxyGen.cacheSelectors=function(){OxyGen.closeModal=a.getElementById("closeModal");OxyGen.RightKey=c('[data-scroll-to-key="right"]');OxyGen.DownKey=c('[data-scroll-to-key="down"]');OxyGen.Window=c(b);OxyGen.Document=c(a);OxyGen.Body=c("body");OxyGen.HtmlBody=c("html, body");OxyGen.ALink=c("a");OxyGen.InfiniteLoadingMSG=c("#infinite_load_msg");OxyGen.LoadMSG=c(".load_msg");OxyGen.expWrapper=c(".expanded-wrapper");OxyGen.ThinHeadDivs=c(".expanded-wrapper, header#expanded");OxyGen.SlideShow=c("#slideshow");OxyGen.main=c("main");OxyGen.ButtonPW=c('input[type="password"]');OxyGen.ButtonSubmit=c('button[type="submit"]');OxyGen.MenuDiv=c(".menu");OxyGen.ButtonShow=c(".show");OxyGen.Logo=c("#logo");OxyGen.SiteName=c(".site-name");OxyGen.Nav=c("nav");OxyGen.RegNavLink=c("nav li a");OxyGen.ModalMask=c(".OxyGenModal");OxyGen.ToggleModal=c(".toggleModal");OxyGen.CommentCount=c("#comment_count");OxyGen.DisquisDiv=c(".disquis");OxyGen.pageBottom=c(".page_bottom");OxyGen.essayPage=c(".essay-pagination");OxyGen.footerwrapper=c(".oxygen-footer-menu-wrapper");OxyGen.footer=c("oxygen-footer");OxyGen.ToTop=c(".to-top");OxyGen.ImgProtected=c("img, #cover_bg, .k-pulse, .k-video, .mejs-overlay, .mejs-overlay-button");OxyGen.infiniteLoading="k-infinite-loading";OxyGen.InfiniteLoaded="k-infinite-loaded";OxyGen.LightboxLoading="koken:lightbox:loading";OxyGen.LightboxLoaded="koken:lightbox:loaded";OxyGen.ClassTouch="o-touch";OxyGen.ClassImgProtect="o-img-protect";OxyGen.ClassIsProtected="o-protected";OxyGen.ClassPulseProtected="pulse-content-ui-container";OxyGen.ClassThinHead="thin_head";OxyGen.ClassShrink="shrink";OxyGen.ClassExternal="external";OxyGen.ClassHasModal="hasOpenModal";OxyGen.ClassNavCurrent=".k-nav-current";OxyGen.ClassEssay="k-lens-essay";OxyGen.ClassRegNav="regular";OxyGen.ClassExpanded="expanded";OxyGen.ClassExtendedIndex="extended_on";OxyGen.ClassShowToggled="show-toggled";OxyGen.ClassRegNavMobile="mobile";OxyGen.ClassRegNavMobOpen="mobileOpen";OxyGen.ClassPageLoading="Page--loading";OxyGen.ClassLightBoxLoading="Lightbox--loading";OxyGen.ClassTopVisible="to-is-visible";OxyGen.ClassTopFadeOut="to-fade-out";OxyGen.ClassTopBottom="to-top-bottom";OxyGen.ClassTopHide="to-is-visible to-fade-out to-top-bottom";OxyGen.ScrollToLink=".scrollTo, .cover_scroll_link";OxyGen.ThineHeadOffSet=70;OxyGen.RegWindoWidth=769;OxyGen.TopOffSet=700;OxyGen.TopOffSetOP=1200;OxyGen.TopMiddleOffSet=1700;OxyGen.ScrollDuration=1000};OxyGen.consoleMSG=function(){var e=0;if(!e){setTimeout(function(){console.log("%cWelcome!","font: 3em sans-serif; color: orange; ");console.log("%cHello, and welcome to the OxyGen console. If this is your first time here, make yourself at home. (If not, disregard this message!)","font: 1.5em sans-serif; color: white;");console.log("%cThank you for choosing OxyGen as your prefered theme for your portfolio website!","font: 1.5em sans-serif; color: orange;");console.log("%cWhat you can find down here is what lies underneath Koken and OxyGen: its code. You can read, write, rewrite, and manipulate this code to make the web your own.","font: 1.5em sans-serif; color: black;");console.log("%cYou can find out more about using the console from these sites:","font: 1.25 sans-serif; color: black;");console.log("%c - Firefox: https://developer.mozilla.org/en-US/docs/Tools/Web_Console","font: 1.25 sans-serif; color: black;");console.log("%c - Chrome: https://developers.google.com/web/tools/chrome-devtools/console/","font: 1.25 sans-serif; color: black;");console.log("%c - Safari: https://developer.apple.com/library/content/documentation/AppleApplications/Conceptual/Safari_Developer_Guide/Console/Console.html","font: 1.25 sans-serif; color: black;");console.log("%c - Or just use any search engine to look up 'developer console'","font: 1.25 sans-serif; color: black;");console.log("%cFor help with learning to code, try https://www.codecademy.com/","font: 1.25 sans-serif; color: black;");console.log("%c[This text generated by https://oxygen.kokensupport.com/]","font: 1 sans-serif; color: grey;");console.log("%c       /\\__\\         /\\  \\         /\\__\\         /\\  \\         /\\__\\","font: 1 sans-serif; color: orange;");console.log("%c      /:/  /        /::\\  \\       /:/  /        /::\\  \\       /::|  |","font: 1 sans-serif; color: orange;");console.log("%c     /:/__/        /:/\\:\\  \\     /:/__/        /:/\\:\\  \\     /:|:|  |","font: 1 sans-serif; color: orange;");console.log("%c    /::\\__\\____   /:/  \\:\\  \\   /::\\__\\____   /::\\~\\:\\  \\   /:/|:|  |__","font: 1 sans-serif; color: orange;");console.log("%c   /:/\\:::::\\__\\ /:/__/ \\:\\__\\ /:/\\:::::\\__\\ /:/\\:\\ \\:\\__\\ /:/ |:| /\\__\\","font: 1 sans-serif; color: orange;");console.log("%c   \\/_|:|~~|~    \\:\\  \\ /:/  / \\/_|:|~~|~    \\:\\~\\:\\ \\/__/ \\/__|:|/:/  /","font: 1 sans-serif; color: orange;");console.log("%c      |:|  |      \\:\\  /:/  /     |:|  |      \\:\\ \\:\\__\\       |:/:/  /","font: 1 sans-serif; color: orange;");console.log("%c      |:|  |       \\:\\/:/  /      |:|  |       \\:\\ \\/__/       |::/  /","font: 1 sans-serif; color: orange;");console.log("%c      |:|  |        \\::/  /       |:|  |        \\:\\__\\         /:/  /","font: 1 sans-serif; color: orange;");console.log("%c       \\|__|         \\/__/         \\|__|         \\/__/         \\/__/","font: 1 sans-serif; color: orange;")},1);e=1}},OxyGen.consoleMSG();OxyGen.keyMaps=function(){a.addEventListener("keydown",function(e){if(e.which==27){OxyGen.closeModal.click()}if(e.which==39){OxyGen.RightKey.click()}if(e.which==40){OxyGen.DownKey.click()}})};OxyGen.setFooterHeight=function(){if(OxyGen.footer.is(":visible")||OxyGen.essayPage.is(":visible")){var e=OxyGen.footerwrapper.outerHeight()+OxyGen.footer.outerHeight()+OxyGen.essayPage.outerHeight();OxyGen.main.css("padding-bottom",e);OxyGen.pageBottom.css("bottom",e)}};OxyGen.imgProtect=function(){if(OxyGen.Body.hasClass(OxyGen.ClassImgProtect)){OxyGen.ImgProtected.addClass(OxyGen.ClassIsProtected);var e=function(f){if(c(f.target).hasClass(OxyGen.ClassIsProtected)||c(f.target).hasClass(OxyGen.ClassPulseProtected)||(f.target.nodeName==="IMG")){f.preventDefault()}};a.addEventListener("contextmenu",e,false);a.addEventListener("mousedown",e,false)}};OxyGen.isTouchDevice=function(){if(!!("ontouchstart" in b)||!!("onmsgesturechange" in b)){OxyGen.HtmlBody.addClass(OxyGen.ClassTouch);if(OxyGen.Body.hasClass(OxyGen.ClassExtendedIndex)&&OxyGen.SlideShow.is(":visible")){var f=OxyGen.Window.height();var e=function(){OxyGen.SlideShow.css("height",f)};e();OxyGen.Window.on("resize",e)}}};OxyGen.throttle=function(g,e,f){e||(e=250);var h,i;return function(){var l=f||this;var k=+new Date,j=arguments;if(h&&k<h+e){clearTimeout(i);i=setTimeout(function(){h=k;g.apply(l,j)},e)}else{h=k;g.apply(l,j)}}};OxyGen.thinHead=function(e){(OxyGen.Document.scrollTop()>OxyGen.ThineHeadOffSet)?OxyGen.ThinHeadDivs.addClass(OxyGen.ClassThinHead)&&OxyGen.ThinHeadDivs.addClass(OxyGen.ClassThinHead):OxyGen.ThinHeadDivs.removeClass(OxyGen.ClassThinHead);if(!OxyGen.expWrapper.hasClass(OxyGen.ClassThinHead)){navigation.okayNav("recalcNav")}};OxyGen.extLinks=function(){var e=function(f){return this.hostname&&this.hostname!==location.hostname};OxyGen.ALink.filter(e).addClass(OxyGen.ClassExternal)};OxyGen.disablePW=function(){var e=function(){OxyGen.ButtonSubmit.attr("disabled",!c(this).val().length)};OxyGen.ButtonPW.keyup(e).trigger("keyup")};OxyGen.toggleModal=function(){var e=function(){OxyGen.Body.toggleClass(OxyGen.ClassHasModal)};OxyGen.ToggleModal.on("click",e)};OxyGen.scrollTo=function(){var e=function(f){((typeof OxyGen.scrollTo.ScrollOffset==="undefined"||OxyGen.scrollTo.ScrollOffset===null))?OxyGen.scrollTo.ScrollOffset=0:OxyGen.scrollTo.ScrollOffset;OxyGen.HtmlBody.animate({scrollTop:c(this.hash).offset().top-OxyGen.scrollTo.ScrollOffset},OxyGen.ScrollDuration,"swing");f.preventDefault()};OxyGen.Document.on("click",OxyGen.ScrollToLink,e)};OxyGen.regularMenu=function(){if(OxyGen.Body.hasClass(OxyGen.ClassRegNav)){var i=OxyGen.Window.width();var e=function(j){OxyGen.RegNavLink.not(OxyGen.ClassNavCurrent).toggle(0);OxyGen.ButtonShow.toggleClass(OxyGen.ClassShowToggled);return false};var g=function(j){c("nav.mobile ul").toggle()};var h=function(n){if(i>=OxyGen.RegWindoWidth){var l=OxyGen.SiteName.outerWidth();var j=OxyGen.Logo.outerWidth();var k=OxyGen.MenuDiv.outerWidth()-OxyGen.ButtonShow.outerWidth();var m=(OxyGen.SiteName.is(":visible"))?i-(l+k):i-(j+k);OxyGen.Nav.css("max-width",m)}};h();OxyGen.Window.on("resize",h);var f=function(j){if(i<=OxyGen.RegWindoWidth){OxyGen.Nav.addClass(OxyGen.ClassRegNavMobile);OxyGen.ButtonShow.addClass(OxyGen.ClassRegNavMobOpen)}};f();OxyGen.ButtonShow.click(e);c(".mobileOpen").click(g)}};OxyGen.loadingMSG=function(){var f=function(i){OxyGen.Body.addClass(OxyGen.ClassPageLoading),OxyGen.InfiniteLoadingMSG.show()};var e=function(i){OxyGen.InfiniteLoadingMSG.hide(),OxyGen.Body.removeClass(OxyGen.ClassPageLoading)};var g=function(i){OxyGen.Body.addClass(OxyGen.ClassLightBoxLoading),OxyGen.LoadMSG.hide(),OxyGen.InfiniteLoadingMSG.show()};var h=function(i){OxyGen.InfiniteLoadingMSG.hide(),OxyGen.LoadMSG.show(),OxyGen.Body.removeClass(OxyGen.ClassLightBoxLoading)};OxyGen.Window.on("k-infinite-loading",f).on("k-infinite-loaded",e).on("koken:lightbox:loading",g).on("koken:lightbox:loaded",h)};OxyGen.loadComments=function(){if(b.location.hash=="#disqus_thread"){var e=location.hash.replace("#","");if(e!=""){location.hash="comments";OxyGen.HtmlBody.animate({scrollTop:OxyGen.CommentCount.offset().top},1000)}}};OxyGen.readingTime=function(){c(function e(){var f=c("article");f.readingTime({readingTimeTarget:f.find(".eta"),wordsPerMinute:270,prependTimeString:"≈ ",lang:"{{ settings.language }}"})})};OxyGen.scrollToTop=function(){var e=function(){(c(this).scrollTop()>OxyGen.TopOffSet)?OxyGen.ToTop.addClass(OxyGen.ClassTopVisible):OxyGen.ToTop.removeClass(OxyGen.ClassTopHide);(c(this).scrollTop()>OxyGen.TopOffSetOP)?OxyGen.ToTop.addClass(OxyGen.ClassTopFadeOut):OxyGen.ToTop.removeClass(OxyGen.ClassTopFadeOut);((OxyGen.footer.is(":visible"))&&c(this).scrollTop()>OxyGen.TopMiddleOffSet)?OxyGen.ToTop.addClass(OxyGen.ClassTopBottom):OxyGen.ToTop.removeClass(OxyGen.ClassTopBottom)};var f=function(g){g.preventDefault();OxyGen.HtmlBody.animate({scrollTop:0,},OxyGen.ScrollDuration,"swing")};OxyGen.Window.scroll(e);OxyGen.ToTop.on("click",f)};OxyGen.CSI=function(){var g=a.getElementsByTagName("*"),f;for(f in g){if(g[f].hasAttribute&&g[f].hasAttribute("oxygen-include")){e(g[f],g[f].getAttribute("oxygen-include"))}}function e(k,i){var m=/^(?:file):/,j=new XMLHttpRequest(),h=0;j.onreadystatechange=function(){if(j.readyState==4){h=j.status}if(m.test(location.href)&&j.responseText){h=200}if(j.readyState==4&&h==200){k.outerHTML=j.responseText}};try{j.open("GET",i,true);j.send()}catch(l){}}};c(a).on("ready",OxyGen.init)})(window,document,jQuery);